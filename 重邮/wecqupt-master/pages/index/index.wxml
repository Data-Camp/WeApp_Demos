<!--index.wxml-->
<view class="container">
  <!--åŠŸèƒ½å¯¼èˆª-->
  <view class="main-core">
    <block wx:for="{{core}}" wx:key="id">
      <navigator wx:if="{{remind !== 'æœªç»‘å®š' && !item.disabled && (!user.teacher || !item.teacher_disabled) }}" class="main-core-item" url="{{'/pages/core/'+item.id+'/'+item.id}}">
        <image class="core-item-icon" src="/images/core/{{item.id}}.png"></image>
        <text class="core-item-name">{{item.name}}</text>
      </navigator>
      <view wx:else class="main-core-item disabled" bindtap="disabled_item">
        <image class="core-item-icon" src="/images/core/{{item.id}}@disabled.png"></image>
        <text class="core-item-name">{{item.name}}</text>
      </view>
    </block>
    <view class="fix_tip {{disabledItemTap?'active':''}}">
        <text wx:if="{{remind == 'æœªç»‘å®š'}}">è¯·å…ˆç»‘å®šå¸å·</text>
        <text wx:else>è¯¥æœåŠ¡ä¸å¯ç”¨</text>
    </view>
  </view>
  <view wx:if="{{remind}}" class="remind-box">
    <image wx:if="{{remind == 'åŠ è½½ä¸­'}}" class="remind-img" src="/images/index/loading.gif"></image>
    <block wx:else>
      <image class="remind-img" src="/images/index/nothing.png"></image>
      <text class="remind-text">{{remind}}</text>
      <navigator wx:if="{{remind == 'æœªç»‘å®š'}}" url="/pages/more/login" class="remind-btn">å‰å¾€ç»‘å®š</navigator>
    </block>
  </view>
  <!--å¡ç‰‡åˆ—è¡¨-->
  <view wx:else class="main-card">
  
    <!--ä»Šæ—¥è¯¾è¡¨-->
    <view class="main-card-item" id="kb" wx:if="{{card.kb.show}}">
      <navigator url="/pages/core/kb/kb">
        <view class="card-item-hd">
          <image class="card-item-icon" src="/images/core/kb.png"></image>
          <text class="card-item-name">ä»Šæ—¥è¯¾è¡¨</text>
        </view>
        <view wx:if="{{card.kb.nothing}}" class="card-item-bd kb-nothing">
          <text>ä»Šå¤©å±…ç„¶æ²¡æœ‰è¯¾~ğŸ˜†</text>
        </view>
        <view wx:else class="card-item-bd">
          <view class="kb-item" wx:for="{{card.kb.data}}" wx:key="when">
            <view class="kb-item-left">
              <text class="kb-item-what">{{item.what}}</text>
              <text class="kb-item-when">{{item.when}}</text>
            </view>
            <text class="kb-item-where">{{item.where}}</text>
          </view>
        </view>
        <view class="kb-open">
          <text>æŸ¥çœ‹å®Œæ•´è¯¾è¡¨</text>
        </view>
      </navigator>
    </view>

    <!--ä¸€å¡é€š-->
    <view class="main-card-item" id="ykt" wx-if="{{card.ykt.show}}">
      <navigator url="/pages/core/ykt/ykt">
        <view class="card-item-hd">
          <image class="card-item-icon" src="/images/core/ykt.png"></image>
          <text class="card-item-name">ä¸€å¡é€š</text>
        </view>
        <view class="card-item-bd">
          <view class="card-info-hd">
            <view class="card-info-left">
              <text class="ykt-title">ä½™é¢ï¼š</text>
            </view>
            <view class="card-info-right">
              <view>æˆªè‡³æ—¶é—´ï¼š{{card.ykt.data.last_time}}</view>
            </view>
          </view>
          <view class="ykt-balance">
            <text class="ykt-balance-value">{{card.ykt.data.balance}}</text>
            <text class="ykt-balance-text">å…ƒ</text>
          </view>
          <block wx:if="{{card.ykt.data.cost_status}}">
            <text class="ykt-title">ä»Šæ—¥æ¶ˆè´¹ï¼š</text>
            <view class="ykt-cost">
              <block wx:for="{{card.ykt.data.today_cost.value}}" wx:key="*this">
                <text class="ykt-cost-value">{{item}}</text>
                <text class="ykt-cost-text" wx:if="{{ index != card.ykt.data.today_cost.value.length - 1}}">+</text>
              </block>
              <text class="ykt-cost-text">=</text>
              <text class="ykt-cost-total">{{card.ykt.data.today_cost.total}}</text>
              <text class="ykt-cost-text">å…ƒ</text>
            </view>
          </block>
        </view>
      </navigator>
    </view>
    
    <!--å€Ÿé˜…ä¿¡æ¯-->
    <view class="main-card-item" id="jy" wx:if="{{card.jy.show}}">
      <navigator url="/pages/core/jy/jy">
        <view class="card-item-hd">
          <image class="card-item-icon" src="/images/core/jy.png"></image>
          <text class="card-item-name">å€Ÿé˜…ä¿¡æ¯</text>
        </view>
        <view class="card-item-bd">
          <view class="card-info-hd">
            <view class="card-info-left">
              <text class="card-info-name">{{user.we.info.name}}</text>
              <text class="card-info-number">{{user.we.info.id}}</text>
            </view>
            <view class="card-info-right">
              <text>å½“å‰å€Ÿé˜…ï¼š{{card.jy.data.books_num}}</text>
              <text>æ¬ è´¹é‡‘é¢ï¼š{{card.jy.data.dbet}}</text>
            </view>
          </view>
          <view class="jy-list">
            <view class="jy-item" wx:for="{{card.jy.data.book_list}}" wx:key="book_name">
              <view class="jy-book">
                <view class="jy-pickup-time">
                  <text class="jy-pickup-time-value">{{item.jsrq}}</text>
                  <text class="jy-pickup-time-text">å€Ÿ</text>
                </view>
                <text class="jy-book-name">{{item.book}}</text>
              </view>
              <view class="jy-return-time">
                <text class="jy-return-time-value">{{item.yhrq}}</text>
                <text class="jy-return-time-text">è¿˜</text>
              </view>
              <view class="jy-timing">
                <text class="jy-timing-text" wx:if="{{item.timing>=0}}">è¿˜æœ‰</text>
                <text class="jy-timing-text" wx:else>å·²è¶…è¿‡</text>
                <text class="jy-timing-value">{{item.timing>=0?item.timing:-item.timing}}</text>
                <text class="jy-timing-text">å¤©</text>
              </view>
            </view>
          </view>
        </view>
      </navigator>
    </view>

    <!--æ°´ç”µè´¹-->
    <view class="main-card-item" id="sdf" wx:if="{{card.sdf.show}}">
      <navigator url="/pages/core/sdf/sdf">
        <view class="card-item-hd">
          <image class="card-item-icon" src="/images/core/sdf.png"></image>
          <text class="card-item-name">ç”µè´¹æŸ¥è¯¢</text>
        </view>
        <view class="card-item-bd">
          <view class="card-info-hd">
            <view class="card-info-left">
              <text class="card-info-name">{{card.sdf.data.room}}</text>
            </view>
            <view class="card-info-right">
              <view>æˆªè‡³æ—¶é—´ï¼š{{card.sdf.data.record_time}}</view>
            </view>
          </view>
          <text class="sdf-hd">å½“æœˆç”¨ç”µï¼š</text>
          <view class="sdf-bd">
            <view class="sdf-key">
              <text class="sdf-value">{{card.sdf.data.spend}}</text>
              <text class="sdf-text">åº¦</text>
            </view>
            <view class="sdf-key" wx:if="{{card.sdf.data.cost<=0}}">
              <text class="sdf-text">å‰©ä½™</text>
              <text class="sdf-value">{{-card.sdf.data.cost}}</text>
              <text class="sdf-text">å…ƒ</text>
            </view>
            <view class="sdf-key" wx:else>
              <text class="sdf-text">ç”¨è¶…</text>
              <text class="sdf-value">{{card.sdf.data.cost}}</text>
              <text class="sdf-text">å…ƒ</text>
            </view>
          </view>
        </view>
      </navigator>
    </view>
  </view>

  <view class="main-ending">
    <view class="main-ending-line"></view>
    <view class="main-ending-text">æˆ‘æ˜¯ä¸€ä¸ªä¹–å·§çš„ç»“å°¾</view>
    <view class="main-ending-line"></view>
  </view>

</view>
